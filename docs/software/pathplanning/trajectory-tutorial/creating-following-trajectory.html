<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="Step 4: Creating and Following a Trajectory" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="With our drive subsystem written, it is now time to generate a trajectory and write an autonomous command to follow it. As per the standard command-based project structure, we will do this in the g..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Step 4: Creating and Following a Trajectory &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/pid-tune.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../../_static/js/present.js"></script>
        <script src="../../../../_static/js/hoverxref.js"></script>
        <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../../_static/js/micromodal.min.js"></script>
        <script src="../../../../_static/js/versionwarning.js"></script>
        <script src="../../../../_static/pid-tune.js"></script>
        <script src="../../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../../_static/js/version-2014.js"></script>
        <script src="../../../../_static/tabs.js"></script>
        <script src="../../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="PathWeaver" href="../pathweaver/index.html" />
    <link rel="prev" title="Step 3: Creating a Drive Subsystem" href="creating-drive-subsystem.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                  <script id="headerscript">
                    if( new Date().getMonth() == 3 && new Date().getDate() == 1) {
                      document.getElementById("headerscript").insertAdjacentHTML("afterend", '<li id="water-link"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Water Game</a></li>');
                    }
                  </script>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="../../../../index.html" style="display: block; margin-bottom: 0;">
      FIRST Robotics Competition
    <picture>
      <source
        sizes="300px"
        srcset="../../../../_static/wpilibDocsLogo_300.webp 300w, ../../../../_static/wpilibDocsLogo_500.webp 500w, ../../../../_static/wpilibDocsLogo_700.webp 700w, ../../../../_static/wpilibDocsLogo_1050.webp 1050w"
        type="image/webp"
      />
      <img
        src="../../../../_static/wpilibDocsLogo.png"
        sizes="300px"
        srcset="../../../../_static/wpilibDocsLogo_300.png 300w, ../../../../_static/wpilibDocsLogo_500.png 500w, ../../../../_static/wpilibDocsLogo_700.png 700w, ../../../../_static/wpilibDocsLogo_1050.png 1050w"
        height="468"
        width="1050"
        alt="Logo"
        decoding="async"
        class="logo"
        style="height: auto; width: 100%; border-radius: 0%;"
      />
    </picture>
  </a>
      <div class="version">
        latest
      </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../yearly-overview/index.html">2023 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Path Planning</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../system-identification/index.html">System Identification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Trajectory Tutorial</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="trajectory-tutorial-overview.html">Trajectory Tutorial Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="characterizing-drive.html">Step 1: Characterizing Your Robot Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="entering-constants.html">Step 2: Entering the Calculated Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating-drive-subsystem.html">Step 3: Creating a Drive Subsystem</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Step 4: Creating and Following a Trajectory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pathweaver/index.html">PathWeaver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Path Planning</a></li>
          <li class="breadcrumb-item"><a href="index.html">Trajectory Tutorial</a></li>
      <li class="breadcrumb-item active">Step 4: Creating and Following a Trajectory</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/main/source/docs/software/pathplanning/trajectory-tutorial/creating-following-trajectory.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="step-4-creating-and-following-a-trajectory">
<h1>Step 4: Creating and Following a Trajectory<a class="headerlink" href="#step-4-creating-and-following-a-trajectory" title="Permalink to this heading"></a></h1>
<p>With our drive subsystem written, it is now time to generate a trajectory and write an autonomous command to follow it.</p>
<p>As per the <a class="reference internal" href="../../commandbased/structuring-command-based-project.html#structuring-a-command-based-robot-project"><span class="std std-ref">standard command-based project structure</span></a>, we will do this in the <code class="docutils literal notranslate"><span class="pre">getAutonomousCommand</span></code> method of the <code class="docutils literal notranslate"><span class="pre">RobotContainer</span></code> class.  The full method from the RamseteCommand Example Project (<a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/ramsetecommand">Java</a>, <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/RamseteCommand">C++</a>) can be seen below.  The rest of the article will break down the different parts of the method in more detail.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-0-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-0-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-0-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 74</span><span class="w">  </span><span class="cm">/**</span>
<span class="linenos"> 75</span><span class="cm">   * Use this to pass the autonomous command to the main {@link Robot} class.</span>
<span class="linenos"> 76</span><span class="cm">   *</span>
<span class="linenos"> 77</span><span class="cm">   * @return the command to run in autonomous</span>
<span class="linenos"> 78</span><span class="cm">   */</span><span class="w"></span>
<span class="linenos"> 79</span><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">getAutonomousCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 80</span><span class="w">    </span><span class="c1">// Create a voltage constraint to ensure we don&#39;t accelerate too fast</span><span class="w"></span>
<span class="linenos"> 81</span><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">autoVoltageConstraint</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos"> 82</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DifferentialDriveVoltageConstraint</span><span class="p">(</span><span class="w"></span>
<span class="linenos"> 83</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleMotorFeedforward</span><span class="p">(</span><span class="w"></span>
<span class="linenos"> 84</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">ksVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 85</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kvVoltSecondsPerMeter</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 86</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kaVoltSecondsSquaredPerMeter</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 87</span><span class="w">            </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 88</span><span class="w">            </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="w">    </span><span class="c1">// Create config for trajectory</span><span class="w"></span>
<span class="linenos"> 91</span><span class="w">    </span><span class="n">TrajectoryConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos"> 92</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">TrajectoryConfig</span><span class="p">(</span><span class="w"></span>
<span class="linenos"> 93</span><span class="w">                </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kMaxSpeedMetersPerSecond</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 94</span><span class="w">                </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kMaxAccelerationMetersPerSecondSquared</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 95</span><span class="w">            </span><span class="c1">// Add kinematics to ensure max speed is actually obeyed</span><span class="w"></span>
<span class="linenos"> 96</span><span class="w">            </span><span class="p">.</span><span class="na">setKinematics</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 97</span><span class="w">            </span><span class="c1">// Apply the voltage constraint</span><span class="w"></span>
<span class="linenos"> 98</span><span class="w">            </span><span class="p">.</span><span class="na">addConstraint</span><span class="p">(</span><span class="n">autoVoltageConstraint</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="w">    </span><span class="c1">// An example trajectory to follow.  All units in meters.</span><span class="w"></span>
<span class="linenos">101</span><span class="w">    </span><span class="n">Trajectory</span><span class="w"> </span><span class="n">exampleTrajectory</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">102</span><span class="w">        </span><span class="n">TrajectoryGenerator</span><span class="p">.</span><span class="na">generateTrajectory</span><span class="p">(</span><span class="w"></span>
<span class="linenos">103</span><span class="w">            </span><span class="c1">// Start at the origin facing the +X direction</span><span class="w"></span>
<span class="linenos">104</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Pose2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rotation2d</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">105</span><span class="w">            </span><span class="c1">// Pass through these two interior waypoints, making an &#39;s&#39; curve path</span><span class="w"></span>
<span class="linenos">106</span><span class="w">            </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">107</span><span class="w">            </span><span class="c1">// End 3 meters straight ahead of where we started, facing forward</span><span class="w"></span>
<span class="linenos">108</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Pose2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rotation2d</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">109</span><span class="w">            </span><span class="c1">// Pass config</span><span class="w"></span>
<span class="linenos">110</span><span class="w">            </span><span class="n">config</span><span class="p">);</span><span class="w"></span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="w">    </span><span class="n">RamseteCommand</span><span class="w"> </span><span class="n">ramseteCommand</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">113</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">RamseteCommand</span><span class="p">(</span><span class="w"></span>
<span class="linenos">114</span><span class="w">            </span><span class="n">exampleTrajectory</span><span class="p">,</span><span class="w"></span>
<span class="linenos">115</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">getPose</span><span class="p">,</span><span class="w"></span>
<span class="linenos">116</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">RamseteController</span><span class="p">(</span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kRamseteB</span><span class="p">,</span><span class="w"> </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kRamseteZeta</span><span class="p">),</span><span class="w"></span>
<span class="linenos">117</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleMotorFeedforward</span><span class="p">(</span><span class="w"></span>
<span class="linenos">118</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">ksVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos">119</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kvVoltSecondsPerMeter</span><span class="p">,</span><span class="w"></span>
<span class="linenos">120</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kaVoltSecondsSquaredPerMeter</span><span class="p">),</span><span class="w"></span>
<span class="linenos">121</span><span class="w">            </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos">122</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">getWheelSpeeds</span><span class="p">,</span><span class="w"></span>
<span class="linenos">123</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">PIDController</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"></span>
<span class="linenos">124</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">PIDController</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"></span>
<span class="linenos">125</span><span class="w">            </span><span class="c1">// RamseteCommand passes volts to the callback</span><span class="w"></span>
<span class="linenos">126</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">tankDriveVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos">127</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">);</span><span class="w"></span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="w">    </span><span class="c1">// Reset odometry to the starting pose of the trajectory.</span><span class="w"></span>
<span class="linenos">130</span><span class="w">    </span><span class="n">m_robotDrive</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(</span><span class="n">exampleTrajectory</span><span class="p">.</span><span class="na">getInitialPose</span><span class="p">());</span><span class="w"></span>
<span class="linenos">131</span>
<span class="linenos">132</span><span class="w">    </span><span class="c1">// Run path following command, then stop at the end.</span><span class="w"></span>
<span class="linenos">133</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ramseteCommand</span><span class="p">.</span><span class="na">andThen</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">m_robotDrive</span><span class="p">.</span><span class="na">tankDriveVolts</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span><span class="w"></span>
<span class="linenos">134</span><span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="linenos">135</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">45</span><span class="n">frc2</span><span class="o">::</span><span class="n">CommandPtr</span><span class="w"> </span><span class="nf">RobotContainer::GetAutonomousCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">46</span><span class="w">  </span><span class="c1">// Create a voltage constraint to ensure we don&#39;t accelerate too fast</span>
<span class="linenos">47</span><span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">DifferentialDriveVoltageConstraint</span><span class="w"> </span><span class="n">autoVoltageConstraint</span><span class="p">{</span><span class="w"></span>
<span class="linenos">48</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">SimpleMotorFeedforward</span><span class="o">&lt;</span><span class="n">units</span><span class="o">::</span><span class="n">meters</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="linenos">49</span><span class="w">          </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ks</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ka</span><span class="p">},</span><span class="w"></span>
<span class="linenos">50</span><span class="w">      </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="n">_V</span><span class="p">};</span><span class="w"></span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="w">  </span><span class="c1">// Set up config for trajectory</span>
<span class="linenos">53</span><span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">TrajectoryConfig</span><span class="w"> </span><span class="n">config</span><span class="p">{</span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kMaxSpeed</span><span class="p">,</span><span class="w"></span>
<span class="linenos">54</span><span class="w">                               </span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kMaxAcceleration</span><span class="p">};</span><span class="w"></span>
<span class="linenos">55</span><span class="w">  </span><span class="c1">// Add kinematics to ensure max speed is actually obeyed</span>
<span class="linenos">56</span><span class="w">  </span><span class="n">config</span><span class="p">.</span><span class="n">SetKinematics</span><span class="p">(</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">  </span><span class="c1">// Apply the voltage constraint</span>
<span class="linenos">58</span><span class="w">  </span><span class="n">config</span><span class="p">.</span><span class="n">AddConstraint</span><span class="p">(</span><span class="n">autoVoltageConstraint</span><span class="p">);</span><span class="w"></span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="w">  </span><span class="c1">// An example trajectory to follow.  All units in meters.</span>
<span class="linenos">61</span><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">exampleTrajectory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frc</span><span class="o">::</span><span class="n">TrajectoryGenerator</span><span class="o">::</span><span class="n">GenerateTrajectory</span><span class="p">(</span><span class="w"></span>
<span class="linenos">62</span><span class="w">      </span><span class="c1">// Start at the origin facing the +X direction</span>
<span class="linenos">63</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">Pose2d</span><span class="p">{</span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_deg</span><span class="p">},</span><span class="w"></span>
<span class="linenos">64</span><span class="w">      </span><span class="c1">// Pass through these two interior waypoints, making an &#39;s&#39; curve path</span>
<span class="linenos">65</span><span class="w">      </span><span class="p">{</span><span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="p">{</span><span class="mi">1</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">_m</span><span class="p">},</span><span class="w"> </span><span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="p">{</span><span class="mi">2</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="n">_m</span><span class="p">}},</span><span class="w"></span>
<span class="linenos">66</span><span class="w">      </span><span class="c1">// End 3 meters straight ahead of where we started, facing forward</span>
<span class="linenos">67</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">Pose2d</span><span class="p">{</span><span class="mi">3</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_deg</span><span class="p">},</span><span class="w"></span>
<span class="linenos">68</span><span class="w">      </span><span class="c1">// Pass the config</span>
<span class="linenos">69</span><span class="w">      </span><span class="n">config</span><span class="p">);</span><span class="w"></span>
<span class="linenos">70</span>
<span class="linenos">71</span><span class="w">  </span><span class="n">frc2</span><span class="o">::</span><span class="n">CommandPtr</span><span class="w"> </span><span class="n">ramseteCommand</span><span class="p">{</span><span class="n">frc2</span><span class="o">::</span><span class="n">RamseteCommand</span><span class="p">(</span><span class="w"></span>
<span class="linenos">72</span><span class="w">      </span><span class="n">exampleTrajectory</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">GetPose</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">73</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">RamseteController</span><span class="p">{</span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kRamseteB</span><span class="p">,</span><span class="w"></span>
<span class="linenos">74</span><span class="w">                             </span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kRamseteZeta</span><span class="p">},</span><span class="w"></span>
<span class="linenos">75</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">SimpleMotorFeedforward</span><span class="o">&lt;</span><span class="n">units</span><span class="o">::</span><span class="n">meters</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="linenos">76</span><span class="w">          </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ks</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ka</span><span class="p">},</span><span class="w"></span>
<span class="linenos">77</span><span class="w">      </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos">78</span><span class="w">      </span><span class="p">[</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">GetWheelSpeeds</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">79</span><span class="w">      </span><span class="n">frc2</span><span class="o">::</span><span class="n">PIDController</span><span class="p">{</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="linenos">80</span><span class="w">      </span><span class="n">frc2</span><span class="o">::</span><span class="n">PIDController</span><span class="p">{</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="linenos">81</span><span class="w">      </span><span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">TankDriveVolts</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">82</span><span class="w">      </span><span class="p">{</span><span class="o">&amp;</span><span class="n">m_drive</span><span class="p">})};</span><span class="w"></span>
<span class="linenos">83</span>
<span class="linenos">84</span><span class="w">  </span><span class="c1">// Reset odometry to the starting pose of the trajectory.</span>
<span class="linenos">85</span><span class="w">  </span><span class="n">m_drive</span><span class="p">.</span><span class="n">ResetOdometry</span><span class="p">(</span><span class="n">exampleTrajectory</span><span class="p">.</span><span class="n">InitialPose</span><span class="p">());</span><span class="w"></span>
<span class="linenos">86</span>
<span class="linenos">87</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">ramseteCommand</span><span class="p">)</span><span class="w"></span>
<span class="linenos">88</span><span class="w">      </span><span class="p">.</span><span class="n">BeforeStarting</span><span class="p">(</span><span class="w"></span>
<span class="linenos">89</span><span class="w">          </span><span class="n">frc2</span><span class="o">::</span><span class="n">cmd</span><span class="o">::</span><span class="n">RunOnce</span><span class="p">([</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">TankDriveVolts</span><span class="p">(</span><span class="mi">0</span><span class="n">_V</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_V</span><span class="p">);</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{}));</span><span class="w"></span>
<span class="linenos">90</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<section id="configuring-the-trajectory-constraints">
<h2>Configuring the Trajectory Constraints<a class="headerlink" href="#configuring-the-trajectory-constraints" title="Permalink to this heading"></a></h2>
<p>First, we must set some configuration parameters for the trajectory which will ensure that the generated trajectory is followable.</p>
<section id="creating-a-voltage-constraint">
<h3>Creating a Voltage Constraint<a class="headerlink" href="#creating-a-voltage-constraint" title="Permalink to this heading"></a></h3>
<p>The first piece of configuration we will need is a voltage constraint.  This will ensure that the generated trajectory never commands the robot to go faster than it is capable of achieving with the given voltage supply:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-1-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-1-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-1-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos">80</span><span class="w">    </span><span class="c1">// Create a voltage constraint to ensure we don&#39;t accelerate too fast</span><span class="w"></span>
<span class="linenos">81</span><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="n">autoVoltageConstraint</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">82</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DifferentialDriveVoltageConstraint</span><span class="p">(</span><span class="w"></span>
<span class="linenos">83</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleMotorFeedforward</span><span class="p">(</span><span class="w"></span>
<span class="linenos">84</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">ksVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos">85</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kvVoltSecondsPerMeter</span><span class="p">,</span><span class="w"></span>
<span class="linenos">86</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kaVoltSecondsSquaredPerMeter</span><span class="p">),</span><span class="w"></span>
<span class="linenos">87</span><span class="w">            </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos">88</span><span class="w">            </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">46</span><span class="w">  </span><span class="c1">// Create a voltage constraint to ensure we don&#39;t accelerate too fast</span>
<span class="linenos">47</span><span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">DifferentialDriveVoltageConstraint</span><span class="w"> </span><span class="n">autoVoltageConstraint</span><span class="p">{</span><span class="w"></span>
<span class="linenos">48</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">SimpleMotorFeedforward</span><span class="o">&lt;</span><span class="n">units</span><span class="o">::</span><span class="n">meters</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="linenos">49</span><span class="w">          </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ks</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ka</span><span class="p">},</span><span class="w"></span>
<span class="linenos">50</span><span class="w">      </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="n">_V</span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>Notice that we set the maximum voltage to 10V, rather than the nominal battery voltage of 12V.  This gives us some “headroom” to deal with “voltage sag” during operation.</p>
</section>
<section id="creating-the-configuration">
<h3>Creating the Configuration<a class="headerlink" href="#creating-the-configuration" title="Permalink to this heading"></a></h3>
<p>Now that we have our voltage constraint, we can create our <code class="docutils literal notranslate"><span class="pre">TrajectoryConfig</span></code> instance, which wraps together all of our path constraints:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-2-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-2-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-2-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos">90</span><span class="w">    </span><span class="c1">// Create config for trajectory</span><span class="w"></span>
<span class="linenos">91</span><span class="w">    </span><span class="n">TrajectoryConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">92</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">TrajectoryConfig</span><span class="p">(</span><span class="w"></span>
<span class="linenos">93</span><span class="w">                </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kMaxSpeedMetersPerSecond</span><span class="p">,</span><span class="w"></span>
<span class="linenos">94</span><span class="w">                </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kMaxAccelerationMetersPerSecondSquared</span><span class="p">)</span><span class="w"></span>
<span class="linenos">95</span><span class="w">            </span><span class="c1">// Add kinematics to ensure max speed is actually obeyed</span><span class="w"></span>
<span class="linenos">96</span><span class="w">            </span><span class="p">.</span><span class="na">setKinematics</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">)</span><span class="w"></span>
<span class="linenos">97</span><span class="w">            </span><span class="c1">// Apply the voltage constraint</span><span class="w"></span>
<span class="linenos">98</span><span class="w">            </span><span class="p">.</span><span class="na">addConstraint</span><span class="p">(</span><span class="n">autoVoltageConstraint</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">52</span><span class="w">  </span><span class="c1">// Set up config for trajectory</span>
<span class="linenos">53</span><span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">TrajectoryConfig</span><span class="w"> </span><span class="n">config</span><span class="p">{</span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kMaxSpeed</span><span class="p">,</span><span class="w"></span>
<span class="linenos">54</span><span class="w">                               </span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kMaxAcceleration</span><span class="p">};</span><span class="w"></span>
<span class="linenos">55</span><span class="w">  </span><span class="c1">// Add kinematics to ensure max speed is actually obeyed</span>
<span class="linenos">56</span><span class="w">  </span><span class="n">config</span><span class="p">.</span><span class="n">SetKinematics</span><span class="p">(</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">);</span><span class="w"></span>
<span class="linenos">57</span><span class="w">  </span><span class="c1">// Apply the voltage constraint</span>
<span class="linenos">58</span><span class="w">  </span><span class="n">config</span><span class="p">.</span><span class="n">AddConstraint</span><span class="p">(</span><span class="n">autoVoltageConstraint</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></div>
</section>
</section>
<section id="generating-the-trajectory">
<h2>Generating the Trajectory<a class="headerlink" href="#generating-the-trajectory" title="Permalink to this heading"></a></h2>
<p>With our trajectory configuration in hand, we are now ready to generate our trajectory.  For this example, we will be generating a “clamped cubic” trajectory - this means we will specify full robot poses at the endpoints, and positions only for interior waypoints (also known as “knot points”).  As elsewhere, all distances are in meters.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-3-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-3-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-3-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos">100</span><span class="w">    </span><span class="c1">// An example trajectory to follow.  All units in meters.</span><span class="w"></span>
<span class="linenos">101</span><span class="w">    </span><span class="n">Trajectory</span><span class="w"> </span><span class="n">exampleTrajectory</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">102</span><span class="w">        </span><span class="n">TrajectoryGenerator</span><span class="p">.</span><span class="na">generateTrajectory</span><span class="p">(</span><span class="w"></span>
<span class="linenos">103</span><span class="w">            </span><span class="c1">// Start at the origin facing the +X direction</span><span class="w"></span>
<span class="linenos">104</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Pose2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rotation2d</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">105</span><span class="w">            </span><span class="c1">// Pass through these two interior waypoints, making an &#39;s&#39; curve path</span><span class="w"></span>
<span class="linenos">106</span><span class="w">            </span><span class="n">List</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">107</span><span class="w">            </span><span class="c1">// End 3 meters straight ahead of where we started, facing forward</span><span class="w"></span>
<span class="linenos">108</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">Pose2d</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rotation2d</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span><span class="w"></span>
<span class="linenos">109</span><span class="w">            </span><span class="c1">// Pass config</span><span class="w"></span>
<span class="linenos">110</span><span class="w">            </span><span class="n">config</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">60</span><span class="w">  </span><span class="c1">// An example trajectory to follow.  All units in meters.</span>
<span class="linenos">61</span><span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">exampleTrajectory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">frc</span><span class="o">::</span><span class="n">TrajectoryGenerator</span><span class="o">::</span><span class="n">GenerateTrajectory</span><span class="p">(</span><span class="w"></span>
<span class="linenos">62</span><span class="w">      </span><span class="c1">// Start at the origin facing the +X direction</span>
<span class="linenos">63</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">Pose2d</span><span class="p">{</span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_deg</span><span class="p">},</span><span class="w"></span>
<span class="linenos">64</span><span class="w">      </span><span class="c1">// Pass through these two interior waypoints, making an &#39;s&#39; curve path</span>
<span class="linenos">65</span><span class="w">      </span><span class="p">{</span><span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="p">{</span><span class="mi">1</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">_m</span><span class="p">},</span><span class="w"> </span><span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="p">{</span><span class="mi">2</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="n">_m</span><span class="p">}},</span><span class="w"></span>
<span class="linenos">66</span><span class="w">      </span><span class="c1">// End 3 meters straight ahead of where we started, facing forward</span>
<span class="linenos">67</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">Pose2d</span><span class="p">{</span><span class="mi">3</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_deg</span><span class="p">},</span><span class="w"></span>
<span class="linenos">68</span><span class="w">      </span><span class="c1">// Pass the config</span>
<span class="linenos">69</span><span class="w">      </span><span class="n">config</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of generating the trajectory on the roboRIO as outlined above, one can also <a class="reference internal" href="../pathweaver/integrating-robot-program.html#importing-a-pathweaver-json"><span class="std std-ref">import a PathWeaver JSON</span></a>.</p>
</div>
</section>
<section id="creating-the-ramsetecommand">
<h2>Creating the RamseteCommand<a class="headerlink" href="#creating-the-ramsetecommand" title="Permalink to this heading"></a></h2>
<p>We will first reset our robot’s pose to the starting pose of the trajectory. This ensures that the robot’s location on the coordinate system and the trajectory’s starting position are the same.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-4-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-4-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-4-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos">128</span><span class="w">    </span><span class="c1">// Reset odometry to the starting pose of the trajectory.</span><span class="w"></span>
<span class="linenos">129</span><span class="w">    </span><span class="n">m_robotDrive</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(</span><span class="n">exampleTrajectory</span><span class="p">.</span><span class="na">getInitialPose</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">84</span><span class="w">  </span><span class="c1">// Reset odometry to the starting pose of the trajectory.</span>
<span class="linenos">85</span><span class="w">  </span><span class="n">m_drive</span><span class="p">.</span><span class="n">ResetOdometry</span><span class="p">(</span><span class="n">exampleTrajectory</span><span class="p">.</span><span class="n">InitialPose</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>It is very important that the initial robot pose match the first pose in the trajectory.  For the purposes of our example, the robot will be reliably starting at a position of <code class="docutils literal notranslate"><span class="pre">(0,0)</span></code> with a heading of <code class="docutils literal notranslate"><span class="pre">0</span></code>.  In actual use, however, it is probably not desirable to base your coordinate system on the robot position, and so the starting position for both the robot and the trajectory should be set to some other value.  If you wish to use a trajectory that has been defined in robot-centric coordinates in such a situation, you can transform it to be relative to the robot’s current pose using the <code class="docutils literal notranslate"><span class="pre">transformBy</span></code> method (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/trajectory/Trajectory.html#transformBy(edu.wpi.first.math.geometry.Transform2d)">Java</a>,  <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc_1_1_trajectory.html#a8edfbd82347bbf32ddfb092679336cd8">C++</a>).  For more information about transforming trajectories, see <a class="reference internal" href="../../advanced-controls/trajectories/transforming-trajectories.html#transforming-trajectories"><span class="std std-ref">Transforming Trajectories</span></a>.</p>
<p>Now that we have a trajectory, we can create a command that, when executed, will follow that trajectory.  To do this, we use the <code class="docutils literal notranslate"><span class="pre">RamseteCommand</span></code> class (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/RamseteCommand.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_ramsete_command.html">C++</a>)</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-5-QysrIChTb3VyY2Up" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tab" tabindex="-1">C++ (Source)</button></div><div aria-labelledby="tab-5-SmF2YQ==" class="sphinx-tabs-panel group-tab" id="panel-5-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="linenos">112</span><span class="w">    </span><span class="n">RamseteCommand</span><span class="w"> </span><span class="n">ramseteCommand</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">113</span><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">RamseteCommand</span><span class="p">(</span><span class="w"></span>
<span class="linenos">114</span><span class="w">            </span><span class="n">exampleTrajectory</span><span class="p">,</span><span class="w"></span>
<span class="linenos">115</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">getPose</span><span class="p">,</span><span class="w"></span>
<span class="linenos">116</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">RamseteController</span><span class="p">(</span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kRamseteB</span><span class="p">,</span><span class="w"> </span><span class="n">AutoConstants</span><span class="p">.</span><span class="na">kRamseteZeta</span><span class="p">),</span><span class="w"></span>
<span class="linenos">117</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleMotorFeedforward</span><span class="p">(</span><span class="w"></span>
<span class="linenos">118</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">ksVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos">119</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kvVoltSecondsPerMeter</span><span class="p">,</span><span class="w"></span>
<span class="linenos">120</span><span class="w">                </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kaVoltSecondsSquaredPerMeter</span><span class="p">),</span><span class="w"></span>
<span class="linenos">121</span><span class="w">            </span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos">122</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">getWheelSpeeds</span><span class="p">,</span><span class="w"></span>
<span class="linenos">123</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">PIDController</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"></span>
<span class="linenos">124</span><span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">PIDController</span><span class="p">(</span><span class="n">DriveConstants</span><span class="p">.</span><span class="na">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"></span>
<span class="linenos">125</span><span class="w">            </span><span class="c1">// RamseteCommand passes volts to the callback</span><span class="w"></span>
<span class="linenos">126</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">::</span><span class="n">tankDriveVolts</span><span class="p">,</span><span class="w"></span>
<span class="linenos">127</span><span class="w">            </span><span class="n">m_robotDrive</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-QysrIChTb3VyY2Up" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-QysrIChTb3VyY2Up" name="QysrIChTb3VyY2Up" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">71</span><span class="w">  </span><span class="n">frc2</span><span class="o">::</span><span class="n">CommandPtr</span><span class="w"> </span><span class="n">ramseteCommand</span><span class="p">{</span><span class="n">frc2</span><span class="o">::</span><span class="n">RamseteCommand</span><span class="p">(</span><span class="w"></span>
<span class="linenos">72</span><span class="w">      </span><span class="n">exampleTrajectory</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">GetPose</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">73</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">RamseteController</span><span class="p">{</span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kRamseteB</span><span class="p">,</span><span class="w"></span>
<span class="linenos">74</span><span class="w">                             </span><span class="n">AutoConstants</span><span class="o">::</span><span class="n">kRamseteZeta</span><span class="p">},</span><span class="w"></span>
<span class="linenos">75</span><span class="w">      </span><span class="n">frc</span><span class="o">::</span><span class="n">SimpleMotorFeedforward</span><span class="o">&lt;</span><span class="n">units</span><span class="o">::</span><span class="n">meters</span><span class="o">&gt;</span><span class="p">{</span><span class="w"></span>
<span class="linenos">76</span><span class="w">          </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ks</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">ka</span><span class="p">},</span><span class="w"></span>
<span class="linenos">77</span><span class="w">      </span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kDriveKinematics</span><span class="p">,</span><span class="w"></span>
<span class="linenos">78</span><span class="w">      </span><span class="p">[</span><span class="k">this</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">GetWheelSpeeds</span><span class="p">();</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">79</span><span class="w">      </span><span class="n">frc2</span><span class="o">::</span><span class="n">PIDController</span><span class="p">{</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="linenos">80</span><span class="w">      </span><span class="n">frc2</span><span class="o">::</span><span class="n">PIDController</span><span class="p">{</span><span class="n">DriveConstants</span><span class="o">::</span><span class="n">kPDriveVel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"></span>
<span class="linenos">81</span><span class="w">      </span><span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">m_drive</span><span class="p">.</span><span class="n">TankDriveVolts</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="linenos">82</span><span class="w">      </span><span class="p">{</span><span class="o">&amp;</span><span class="n">m_drive</span><span class="p">})};</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<p>This declaration is fairly substantial, so we’ll go through it argument-by-argument:</p>
<ol class="arabic simple">
<li><p>The trajectory: This is the trajectory to be followed; accordingly, we pass the command the trajectory we just constructed in our earlier steps.</p></li>
<li><p>The pose supplier: This is a method reference (or lambda) to the <a class="reference internal" href="creating-drive-subsystem.html#odometry-accessor-method"><span class="std std-ref">drive subsystem method that returns the pose</span></a>.  The RAMSETE controller needs the current pose measurement to determine the required wheel outputs.</p></li>
<li><p>The RAMSETE controller: This is the <code class="docutils literal notranslate"><span class="pre">RamseteController</span></code> object (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/controller/RamseteController.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc_1_1_ramsete_controller.html">C++</a>) that will perform the path-following computation that translates the current measured pose and trajectory state into a chassis speed setpoint.</p></li>
<li><p>The drive feedforward: This is a <code class="docutils literal notranslate"><span class="pre">SimpleMotorFeedforward</span></code> object (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/controller/SimpleMotorFeedforward.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc_1_1_simple_motor_feedforward.html">C++</a>) that will automatically perform the correct feedforward calculation with the feedforward gains (<code class="docutils literal notranslate"><span class="pre">kS</span></code>, <code class="docutils literal notranslate"><span class="pre">kV</span></code>, and <code class="docutils literal notranslate"><span class="pre">kA</span></code>) that we obtained from the drive identification tool.</p></li>
<li><p>The drive kinematics: This is the <code class="docutils literal notranslate"><span class="pre">DifferentialDriveKinematics</span></code> object (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/kinematics/DifferentialDriveKinematics.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc_1_1_differential_drive_kinematics.html">C++</a>) that we constructed earlier in our constants file, and will be used to convert chassis speeds to wheel speeds.</p></li>
<li><p>The wheel speed supplier: This is a method reference (or lambda) to the <a class="reference internal" href="creating-drive-subsystem.html#encoder-accessor-method"><span class="std std-ref">drive subsystem method that returns the wheel speeds</span></a></p></li>
<li><p>The left-side PIDController: This is the <code class="docutils literal notranslate"><span class="pre">PIDController</span></code> object (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/controller/PIDController.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_p_i_d_controller.html">C++</a>) that will track the left-side wheel speed setpoint, using the P gain that we obtained from the drive identification tool.</p></li>
<li><p>The right-side PIDController: This is the <code class="docutils literal notranslate"><span class="pre">PIDController</span></code> object (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/controller/PIDController.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_p_i_d_controller.html">C++</a>) that will track the right-side wheel speed setpoint, using the P gain that we obtained from the drive identification tool.</p></li>
<li><p>The output consumer: This is a method reference (or lambda) to the <a class="reference internal" href="creating-drive-subsystem.html#voltage-based-drive-method"><span class="std std-ref">drive subsystem method that passes the voltage outputs to the drive motors</span></a>.</p></li>
<li><p>The robot drive: This is the drive subsystem itself, included to ensure the command does not operate on the drive at the same time as any other command that uses the drive.</p></li>
</ol>
<p>Finally, note that we append a final “stop” command in sequence after the path-following command, to ensure that the robot stops moving at the end of the trajectory.</p>
</section>
<section id="video">
<h2>Video<a class="headerlink" href="#video" title="Permalink to this heading"></a></h2>
<p>If all has gone well, your robot’s autonomous routine should look something like this:</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; height: auto;"> <iframe src="https://www.youtube-nocookie.com/embed/yVmJDOE3M2Y" frameborder="0" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe> </div><div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; height: auto;"> <iframe src="https://www.youtube-nocookie.com/embed/FLn1bFqlkL0" frameborder="0" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></iframe> </div></section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="creating-drive-subsystem.html" class="btn btn-neutral float-left" title="Step 3: Creating a Drive Subsystem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../pathweaver/index.html" class="btn btn-neutral float-right" title="PathWeaver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, FIRST and other WPILib Contributors. This work is licensed under a Creative Commons Attribution 4.0 International License.
      <span class="commit">Revision <code>c3ff9f30</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2022/">2022</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>