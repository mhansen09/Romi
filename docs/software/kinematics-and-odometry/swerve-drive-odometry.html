<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="Swerve Drive Odometry" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="A user can use the swerve drive kinematics classes in order to perform odometry. WPILib contains a SwerveDriveOdometry class that can be used to track the position of a swerve drive robot on the fi..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Swerve Drive Odometry &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/pid-tune.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/kinematics-and-odometry/swerve-drive-odometry.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../_static/js/present.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script src="../../../_static/js/versionwarning.js"></script>
        <script src="../../../_static/pid-tune.js"></script>
        <script src="../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../_static/js/version-2014.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Mecanum Drive Kinematics" href="mecanum-drive-kinematics.html" />
    <link rel="prev" title="Swerve Drive Kinematics" href="swerve-drive-kinematics.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                  <script id="headerscript">
                    if( new Date().getMonth() == 3 && new Date().getDate() == 1) {
                      document.getElementById("headerscript").insertAdjacentHTML("afterend", '<li id="water-link"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Water Game</a></li>');
                    }
                  </script>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="../../../index.html" style="display: block; margin-bottom: 0;">
      FIRST Robotics Competition
    <picture>
      <source
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.webp 300w, ../../../_static/wpilibDocsLogo_500.webp 500w, ../../../_static/wpilibDocsLogo_700.webp 700w, ../../../_static/wpilibDocsLogo_1050.webp 1050w"
        type="image/webp"
      />
      <img
        src="../../../_static/wpilibDocsLogo.png"
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.png 300w, ../../../_static/wpilibDocsLogo_500.png 500w, ../../../_static/wpilibDocsLogo_700.png 700w, ../../../_static/wpilibDocsLogo_1050.png 1050w"
        height="468"
        width="1050"
        alt="Logo"
        decoding="async"
        class="logo"
        style="height: auto; width: 100%; border-radius: 0%;"
      />
    </picture>
  </a>
      <div class="version">
        latest
      </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yearly-overview/index.html">2023 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Kinematics and Odometry</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro-and-chassis-speeds.html">Introduction to Kinematics and The Chassis Speeds Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="differential-drive-kinematics.html">Differential Drive Kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="differential-drive-odometry.html">Differential Drive Odometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="swerve-drive-kinematics.html">Swerve Drive Kinematics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Swerve Drive Odometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="mecanum-drive-kinematics.html">Mecanum Drive Kinematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mecanum-drive-odometry.html">Mecanum Drive Odometry</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Kinematics and Odometry</a></li>
      <li class="breadcrumb-item active">Swerve Drive Odometry</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/main/source/docs/software/kinematics-and-odometry/swerve-drive-odometry.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="swerve-drive-odometry">
<h1>Swerve Drive Odometry<a class="headerlink" href="#swerve-drive-odometry" title="Permalink to this heading"></a></h1>
<p>A user can use the swerve drive kinematics classes in order to perform <a class="reference internal" href="intro-and-chassis-speeds.html#what-is-odometry"><span class="std std-ref">odometry</span></a>. WPILib contains a <code class="docutils literal notranslate"><span class="pre">SwerveDriveOdometry</span></code> class that can be used to track the position of a swerve drive robot on the field.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because this method only uses encoders and a gyro, the estimate of the robot’s position on the field will drift over time, especially as your robot comes into contact with other robots during gameplay. However, odometry is usually very accurate during the autonomous period.</p>
</div>
<section id="creating-the-odometry-object">
<h2>Creating the odometry object<a class="headerlink" href="#creating-the-odometry-object" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">SwerveDriveOdometry&lt;int</span> <span class="pre">NumModules&gt;</span></code> class constructor requires one template argument (only C++), three mandatory arguments, and one optional argument. The template argument (only C++) is an integer representing the number of swerve modules.</p>
<p>The mandatory arguments are:</p>
<ul class="simple">
<li><p>The kinematics object that represents your swerve drive (as a <code class="docutils literal notranslate"><span class="pre">SwerveDriveKinematics</span></code> instance)</p></li>
<li><p>The angle reported by your gyroscope (as a <code class="docutils literal notranslate"><span class="pre">Rotation2d</span></code>)</p></li>
<li><p>The initial positions of the swerve modules (as an array of <code class="docutils literal notranslate"><span class="pre">SwerveModulePosition</span></code>). In Java, this must be constructed with each wheel position in meters. In C++, the <a class="reference internal" href="../basic-programming/cpp-units.html"><span class="doc">units library</span></a> must be used to represent your wheel positions. It is important that the order in which you pass the <code class="docutils literal notranslate"><span class="pre">SwerveModulePosition</span></code> objects is the same as the order in which you created the kinematics object.</p></li>
</ul>
<p>The fourth optional argument is the starting pose of your robot on the field (as a <code class="docutils literal notranslate"><span class="pre">Pose2d</span></code>). By default, the robot will start at <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">theta</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>0 degrees / radians represents the robot angle when the robot is facing directly toward your opponent’s alliance station. As your robot turns to the left, your gyroscope angle should increase. The <code class="docutils literal notranslate"><span class="pre">Gyro</span></code> interface supplies <code class="docutils literal notranslate"><span class="pre">getRotation2d</span></code>/<code class="docutils literal notranslate"><span class="pre">GetRotation2d</span></code> that you can use for this purpose. See <a class="reference internal" href="../advanced-controls/geometry/coordinate-systems.html#field-coordinate-system"><span class="std std-ref">Field Coordinate System</span></a> for more information about the coordinate system.</p>
</div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-0-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-0-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-0-SmF2YQ==" class="sphinx-tabs-panel code-tab group-tab" id="panel-0-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// Locations for the swerve drive modules relative to the robot center.</span><span class="w"></span>
<span class="n">Translation2d</span><span class="w"> </span><span class="n">m_frontLeftLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mf">0.381</span><span class="p">,</span><span class="w"> </span><span class="mf">0.381</span><span class="p">);</span><span class="w"></span>
<span class="n">Translation2d</span><span class="w"> </span><span class="n">m_frontRightLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="mf">0.381</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.381</span><span class="p">);</span><span class="w"></span>
<span class="n">Translation2d</span><span class="w"> </span><span class="n">m_backLeftLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="o">-</span><span class="mf">0.381</span><span class="p">,</span><span class="w"> </span><span class="mf">0.381</span><span class="p">);</span><span class="w"></span>
<span class="n">Translation2d</span><span class="w"> </span><span class="n">m_backRightLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Translation2d</span><span class="p">(</span><span class="o">-</span><span class="mf">0.381</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">0.381</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Creating my kinematics object using the module locations</span><span class="w"></span>
<span class="n">SwerveDriveKinematics</span><span class="w"> </span><span class="n">m_kinematics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SwerveDriveKinematics</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">m_frontLeftLocation</span><span class="p">,</span><span class="w"> </span><span class="n">m_frontRightLocation</span><span class="p">,</span><span class="w"> </span><span class="n">m_backLeftLocation</span><span class="p">,</span><span class="w"> </span><span class="n">m_backRightLocation</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="c1">// Creating my odometry object from the kinematics object and the initial wheel positions.</span><span class="w"></span>
<span class="c1">// Here, our starting pose is 5 meters along the long end of the field and in the</span><span class="w"></span>
<span class="c1">// center of the field along the short end, facing the opposing alliance wall.</span><span class="w"></span>
<span class="n">SwerveDriveOdometry</span><span class="w"> </span><span class="n">m_odometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SwerveDriveOdometry</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">m_kinematics</span><span class="p">,</span><span class="w"> </span><span class="n">m_gyro</span><span class="p">.</span><span class="na">getRotation2d</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="n">SwerveModulePosition</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">m_frontLeftModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="n">m_frontRightModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="n">m_backLeftModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">    </span><span class="n">m_backRightModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">()</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pose2d</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">13.5</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rotation2d</span><span class="p">()));</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-0-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Locations for the swerve drive modules relative to the robot center.</span>
<span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="w"> </span><span class="n">m_frontLeftLocation</span><span class="p">{</span><span class="mf">0.381</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mf">0.381</span><span class="n">_m</span><span class="p">};</span><span class="w"></span>
<span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="w"> </span><span class="n">m_frontRightLocation</span><span class="p">{</span><span class="mf">0.381</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.381</span><span class="n">_m</span><span class="p">};</span><span class="w"></span>
<span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="w"> </span><span class="n">m_backLeftLocation</span><span class="p">{</span><span class="mf">-0.381</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mf">0.381</span><span class="n">_m</span><span class="p">};</span><span class="w"></span>
<span class="n">frc</span><span class="o">::</span><span class="n">Translation2d</span><span class="w"> </span><span class="n">m_backRightLocation</span><span class="p">{</span><span class="mf">-0.381</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.381</span><span class="n">_m</span><span class="p">};</span><span class="w"></span>

<span class="c1">// Creating my kinematics object using the module locations.</span>
<span class="n">frc</span><span class="o">::</span><span class="n">SwerveDriveKinematics</span><span class="o">&lt;</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m_kinematics</span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">m_frontLeftLocation</span><span class="p">,</span><span class="w"> </span><span class="n">m_frontRightLocation</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">m_backLeftLocation</span><span class="p">,</span><span class="w"> </span><span class="n">m_backRightLocation</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="c1">// Creating my odometry object from the kinematics object. Here,</span>
<span class="c1">// our starting pose is 5 meters along the long end of the field and in the</span>
<span class="c1">// center of the field along the short end, facing forward.</span>
<span class="n">frc</span><span class="o">::</span><span class="n">SwerveDriveOdometry</span><span class="o">&lt;</span><span class="mi">4</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m_odometry</span><span class="p">{</span><span class="n">m_kinematics</span><span class="p">,</span><span class="w"> </span><span class="n">m_gyro</span><span class="p">.</span><span class="n">GetRotation2d</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="n">m_frontLeft</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_frontRight</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="n">m_backLeft</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_backRight</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">()},</span><span class="w"></span>
<span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">Pose2d</span><span class="p">{</span><span class="mi">5</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mf">13.5</span><span class="n">_m</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="n">_rad</span><span class="p">}};</span><span class="w"></span>
</pre></div>
</div>
</div></div>
</section>
<section id="updating-the-robot-pose">
<h2>Updating the robot pose<a class="headerlink" href="#updating-the-robot-pose" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">update</span></code> method of the odometry class updates the robot position on the field. The update method takes in the gyro angle of the robot, along with an array of <code class="docutils literal notranslate"><span class="pre">SwerveModulePosition</span></code> objects. It is important that the order in which you pass the <code class="docutils literal notranslate"><span class="pre">SwerveModulePosition</span></code> objects is the same as the order in which you created the kinematics object.</p>
<p>This <code class="docutils literal notranslate"><span class="pre">update</span></code> method must be called periodically, preferably in the <code class="docutils literal notranslate"><span class="pre">periodic()</span></code> method of a <a class="reference internal" href="../commandbased/subsystems.html#subsystems"><span class="std std-ref">Subsystem</span></a>. The <code class="docutils literal notranslate"><span class="pre">update</span></code> method returns the new updated pose of the robot.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-SmF2YQ==" aria-selected="true" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-SmF2YQ==" name="SmF2YQ==" role="tab" tabindex="0">Java</button><button aria-controls="panel-1-Qysr" aria-selected="false" class="sphinx-tabs-tab code-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-1-SmF2YQ==" class="sphinx-tabs-panel code-tab group-tab" id="panel-1-SmF2YQ==" name="SmF2YQ==" role="tabpanel" tabindex="0"><div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Override</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">periodic</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Get the rotation of the robot from the gyro.</span><span class="w"></span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="n">gyroAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_gyro</span><span class="p">.</span><span class="na">getRotation2d</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Update the pose</span><span class="w"></span>
<span class="w">  </span><span class="n">m_pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_odometry</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">gyroAngle</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="n">SwerveModulePosition</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">m_frontLeftModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_frontRightModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">      </span><span class="n">m_backLeftModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_backRightModule</span><span class="p">.</span><span class="na">getPosition</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">});</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel code-tab group-tab" hidden="true" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">Periodic</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Get the rotation of the robot from the gyro.</span>
<span class="w">  </span><span class="n">frc</span><span class="o">::</span><span class="n">Rotation2d</span><span class="w"> </span><span class="n">gyroAngle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_gyro</span><span class="p">.</span><span class="n">GetRotation2d</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Update the pose</span>
<span class="w">  </span><span class="n">m_pose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m_odometry</span><span class="p">.</span><span class="n">Update</span><span class="p">(</span><span class="n">gyroAngle</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">m_frontLeftModule</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_frontRightModule</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"></span>
<span class="w">      </span><span class="n">m_backLeftModule</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">(),</span><span class="w"> </span><span class="n">m_backRightModule</span><span class="p">.</span><span class="n">GetPosition</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></div>
</section>
<section id="resetting-the-robot-pose">
<h2>Resetting the Robot Pose<a class="headerlink" href="#resetting-the-robot-pose" title="Permalink to this heading"></a></h2>
<p>The robot pose can be reset via the <code class="docutils literal notranslate"><span class="pre">resetPosition</span></code> method. This method accepts three arguments: the current gyro angle, an array of the current module positions (as in the constructor and update method), and the new field-relative pose.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If at any time, you decide to reset your gyroscope or wheel encoders, the <code class="docutils literal notranslate"><span class="pre">resetPosition</span></code> method MUST be called with the new gyro angle and wheel encoder positions.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The implementation of <code class="docutils literal notranslate"><span class="pre">getPosition()</span> <span class="pre">/</span> <span class="pre">GetPosition()</span></code> above is left to the user. The idea is to get the module position (distance and angle) from each module. For a full example, see here: <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/SwerveBot">C++</a> / <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervebot">Java</a>.</p>
</div>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">GetPose</span></code> (C++) / <code class="docutils literal notranslate"><span class="pre">getPoseMeters</span></code> (Java) methods can be used to retrieve the current robot pose without an update.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="swerve-drive-kinematics.html" class="btn btn-neutral float-left" title="Swerve Drive Kinematics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mecanum-drive-kinematics.html" class="btn btn-neutral float-right" title="Mecanum Drive Kinematics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, FIRST and other WPILib Contributors. This work is licensed under a Creative Commons Attribution 4.0 International License.
      <span class="commit">Revision <code>c3ff9f30</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2022/">2022</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>