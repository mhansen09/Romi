<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="Introduction to PID" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="This page explains the conceptual and mathematical workings of a PID controller. A video explanation from WPI is also available. What is a PID Controller?: The PID controller is a common feedback c..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction to PID &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/pid-tune.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../../_static/js/present.js"></script>
        <script src="../../../../_static/js/hoverxref.js"></script>
        <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../../_static/js/micromodal.min.js"></script>
        <script src="../../../../_static/js/versionwarning.js"></script>
        <script src="../../../../_static/pid-tune.js"></script>
        <script src="../../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../../_static/js/version-2014.js"></script>
        <script src="../../../../_static/tabs.js"></script>
        <script src="../../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="PID Introduction Video by WPI" href="pid-video.html" />
    <link rel="prev" title="Introduction to DC Motor Feedforward" href="introduction-to-feedforward.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                  <script id="headerscript">
                    if( new Date().getMonth() == 3 && new Date().getDate() == 1) {
                      document.getElementById("headerscript").insertAdjacentHTML("afterend", '<li id="water-link"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Water Game</a></li>');
                    }
                  </script>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="../../../../index.html" style="display: block; margin-bottom: 0;">
      FIRST Robotics Competition
    <picture>
      <source
        sizes="300px"
        srcset="../../../../_static/wpilibDocsLogo_300.webp 300w, ../../../../_static/wpilibDocsLogo_500.webp 500w, ../../../../_static/wpilibDocsLogo_700.webp 700w, ../../../../_static/wpilibDocsLogo_1050.webp 1050w"
        type="image/webp"
      />
      <img
        src="../../../../_static/wpilibDocsLogo.png"
        sizes="300px"
        srcset="../../../../_static/wpilibDocsLogo_300.png 300w, ../../../../_static/wpilibDocsLogo_500.png 500w, ../../../../_static/wpilibDocsLogo_700.png 700w, ../../../../_static/wpilibDocsLogo_1050.png 1050w"
        height="468"
        width="1050"
        alt="Logo"
        decoding="async"
        class="logo"
        style="height: auto; width: 100%; border-radius: 0%;"
      />
    </picture>
  </a>
      <div class="version">
        latest
      </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../yearly-overview/index.html">2023 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Advanced Controls</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../video-walkthrough.html">A Video Walkthrough of Model Based Validation of Autonomous in FRC</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Advanced Controls Introduction</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="control-system-basics.html">Control System Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="picking-control-strategy.html">Picking a Control Strategy</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction-to-feedforward.html">Introduction to DC Motor Feedforward</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Introduction to PID</a></li>
<li class="toctree-l3"><a class="reference internal" href="pid-video.html">PID Introduction Video by WPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial-intro.html">Introduction To Controls Tuning Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuning-flywheel.html">Tuning a Flywheel Velocity Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuning-turret.html">Tuning a Turret Position Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuning-vertical-arm.html">Tuning a Vertical Arm Position Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="common-control-issues.html">Common Control Loop Tuning Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../filters/index.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geometry/index.html">Geometry Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/index.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trajectories/index.html">Trajectory Generation and Following with WPILib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../state-space/index.html">State-Space and Model Based Control with WPILib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controls-glossary.html">Controls Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Advanced Controls</a></li>
          <li class="breadcrumb-item"><a href="index.html">Advanced Controls Introduction</a></li>
      <li class="breadcrumb-item active">Introduction to PID</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/main/source/docs/software/advanced-controls/introduction/introduction-to-pid.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="introduction-to-pid">
<h1>Introduction to PID<a class="headerlink" href="#introduction-to-pid" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For a guide on implementing PID control with WPILib, see <a class="reference internal" href="../controllers/pidcontroller.html#pid-control-in-wpilib"><span class="std std-ref">PID Control in WPILib</span></a>.</p>
</div>
<p>This page explains the conceptual and mathematical workings of a PID controller. <a class="reference internal" href="pid-video.html#pid-introduction-video-by-wpi"><span class="std std-ref">A video explanation from WPI is also available</span></a>.</p>
<section id="what-is-a-pid-controller">
<h2>What is a PID Controller?<a class="headerlink" href="#what-is-a-pid-controller" title="Permalink to this heading"></a></h2>
<p>The PID controller is a common <a class="reference internal" href="picking-control-strategy.html#feedback-control-correcting-for-errors-and-disturbances"><span class="std std-ref">feedback controller</span></a> consisting of proportional, integral, and derivative terms, hence the name. This article will build up the definition of a PID controller term by term while trying to provide some intuition for how each term behaves.</p>
<p>First, we’ll get some nomenclature for PID controllers out of the way. In a PID context, we use the term <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a> or <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> to mean the desired state of the mechanism, and the term <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> or <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-process-variable"><span class="xref std std-term">process variable</span></a> to refer to the measured state of the mechanism. Below are some common variable naming conventions for relevant quantities.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(r(t)\)</span></p></td>
<td><p><a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a>, <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a></p></td>
<td><p><span class="math notranslate nohighlight">\(u(t)\)</span></p></td>
<td><p><a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-control-effort"><span class="xref std std-term">control effort</span></a></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(e(t)\)</span></p></td>
<td><p><a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-error"><span class="xref std std-term">error</span></a></p></td>
<td><p><span class="math notranslate nohighlight">\(y(t)\)</span></p></td>
<td><p><a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a>, <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-process-variable"><span class="xref std std-term">process variable</span></a></p></td>
</tr>
</tbody>
</table>
<p>The <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-error"><span class="xref std std-term">error</span></a> <span class="math notranslate nohighlight">\(e(t)\)</span> is the difference between the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a> and the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a>, <span class="math notranslate nohighlight">\(r(t) - y(t)\)</span>.</p>
<p>For those already familiar with PID control, this interpretation may not be consistent with the classical explanation of the P, I, and D terms corresponding to response to “past”, “present”, and “future” errors. While that model has merit, we will instead be approaching PID control from the viewpoint of modern control theory, as proportional controllers applied to different physical quantities we care about. This will provide a more complete explanation of the derivative term’s behavior for constant and moving <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoints</span></a>.</p>
<p>Roughly speaking: the proportional term drives the position error to zero, the derivative term drives the velocity error to zero, and the integral term drives the total accumulated error-over-time to zero.  All three terms are added together to produce the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-control-signal"><span class="xref std std-term">control signal</span></a> We’ll go into more detail on each of these below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Throughout the WPILib documentation, you’ll see two ways of writing the tunable constants of the PID controller.</p>
<p>For example, for the proportional gain:</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(K_p\)</span> is the standard math-equation-focused way to notate the constant.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kP</span></code> is a common way to see it written as a variable in software.</p></li>
</ul>
</div></blockquote>
<p>Despite the differences in capitalization, the two formats refer to the same concept.</p>
</div>
</section>
<section id="proportional-term">
<h2>Proportional Term<a class="headerlink" href="#proportional-term" title="Permalink to this heading"></a></h2>
<p>The <em>Proportional</em> term attempts to drive the position error to zero by contributing to the control signal proportionally to the current position error.  Intuitively, this tries to move the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> towards the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a>.</p>
<div class="math notranslate nohighlight">
\[u(t) = K_p e(t)\]</div>
<p>where <span class="math notranslate nohighlight">\(K_p\)</span> is the proportional gain and <span class="math notranslate nohighlight">\(e(t)\)</span> is the error at the current time <span class="math notranslate nohighlight">\(t\)</span>.</p>
<p>The below figure shows a block diagram for a <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> controlled by a P controller.</p>
<img alt="Diagram with a P controller" class="align-center" src="../../../../_images/introduction-to-pid-p-controller.png" />
<p>Proportional gains act like a “software-defined springs” that pull the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> toward the desired position. Recall from physics that we model springs as <span class="math notranslate nohighlight">\(F = - kx\)</span> where <span class="math notranslate nohighlight">\(F\)</span> is the force applied, <span class="math notranslate nohighlight">\(k\)</span> is a proportional constant, and <span class="math notranslate nohighlight">\(x\)</span> is the displacement from the equilibrium point. This can be written another way as <span class="math notranslate nohighlight">\(F = k(0-x)\)</span> where <span class="math notranslate nohighlight">\(0\)</span> is the equilibrium point. If we let the equilibrium point be our feedback controller’s <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a>, the equations have a one to one correspondence.</p>
<div class="math notranslate nohighlight">
\[\begin{split}F &amp;= k(r - x) \\
u(t) &amp;= K_p e(t) = K_p(r(t) - y(t))\end{split}\]</div>
<p>so the “force” with which the proportional controller pulls the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system’s</span></a> <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> toward the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> is proportional to the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-error"><span class="xref std std-term">error</span></a>, just like a spring.</p>
</section>
<section id="derivative-term">
<h2>Derivative Term<a class="headerlink" href="#derivative-term" title="Permalink to this heading"></a></h2>
<p>The <em>Derivative</em> term attempts to drive the derivative of the error to zero by contributing to the control signal proportionally to the derivative of the error.  Intuitively, this tries to make the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> move at the same rate as the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a>.</p>
<div class="math notranslate nohighlight">
\[u(t) = K_p e(t) + K_d \frac{de}{dt}\]</div>
<p>where <span class="math notranslate nohighlight">\(K_p\)</span> is the proportional gain, <span class="math notranslate nohighlight">\(K_d\)</span> is the derivative gain, and <span class="math notranslate nohighlight">\(e(t)\)</span> is the error at the current time <span class="math notranslate nohighlight">\(t\)</span>.</p>
<p>The below figure shows a block diagram for a <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> controlled by a PD controller.</p>
<img alt="Diagram with a PD controller" class="align-center" src="../../../../_images/introduction-to-pid-d-controller.png" />
<p>A PD controller has a proportional controller for position (<span class="math notranslate nohighlight">\(K_p\)</span>) and a proportional controller for velocity (<span class="math notranslate nohighlight">\(K_d\)</span>). The velocity <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> is implicitly provided by how the position <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> changes over time. To prove this, we will rearrange the equation for a PD controller.</p>
<div class="math notranslate nohighlight">
\[u_k = K_p e_k + K_d \frac{e_k - e_{k-1}}{dt}\]</div>
<p>where <span class="math notranslate nohighlight">\(u_k\)</span> is the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-control-effort"><span class="xref std std-term">control effort</span></a> at timestep <span class="math notranslate nohighlight">\(k\)</span> and <span class="math notranslate nohighlight">\(e_k\)</span> is the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-error"><span class="xref std std-term">error</span></a> at timestep <span class="math notranslate nohighlight">\(k\)</span>. <span class="math notranslate nohighlight">\(e_k\)</span> is defined as <span class="math notranslate nohighlight">\(e_k = r_k - x_k\)</span> where <span class="math notranslate nohighlight">\(r_k\)</span> is the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> and <span class="math notranslate nohighlight">\(x_k\)</span> is the current <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-state"><span class="xref std std-term">state</span></a> at timestep <span class="math notranslate nohighlight">\(k\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}u_k &amp;= K_p (r_k - x_k) + K_d \frac{(r_k - x_k) - (r_{k-1} - x_{k-1})}{dt} \\
u_k &amp;= K_p (r_k - x_k) + K_d \frac{r_k - x_k - r_{k-1} + x_{k-1}}{dt} \\
u_k &amp;= K_p (r_k - x_k) + K_d \frac{r_k - r_{k-1} - x_k + x_{k-1}}{dt} \\
u_k &amp;= K_p (r_k - x_k) + K_d \frac{(r_k - r_{k-1}) - (x_k - x_{k-1})}{dt} \\
u_k &amp;= K_p (r_k - x_k) + K_d \left(\frac{r_k - r_{k-1}}{dt} -
  \frac{x_k - x_{k-1}}{dt}\right)\end{split}\]</div>
<p>Notice how <span class="math notranslate nohighlight">\(\frac{r_k - r_{k-1}}{dt}\)</span> is the velocity of the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a>. By the same reason, <span class="math notranslate nohighlight">\(\frac{x_k - x_{k-1}}{dt}\)</span> is the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system’s</span></a> velocity at a given timestep. That means the <span class="math notranslate nohighlight">\(K_d\)</span> term of the PD controller is driving the estimated velocity to the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> velocity.</p>
<p>If the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> is constant, the implicit velocity <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> is zero, so the <span class="math notranslate nohighlight">\(K_d\)</span> term slows the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> down if it’s moving. This acts like a “software-defined damper”. These are commonly seen on door closers, and their damping force increases linearly with velocity.</p>
</section>
<section id="integral-term">
<h2>Integral Term<a class="headerlink" href="#integral-term" title="Permalink to this heading"></a></h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Integral gain is generally not recommended for FRC® use. It is almost always better to use a feedforward controller to eliminate steady-state error.  If you do employ integral gain, it is crucial to provide some protection against <a class="reference internal" href="common-control-issues.html#integral-term-windup"><span class="std std-ref">integral windup</span></a>.</p>
</div>
<p>The <em>Integral</em> term attempts to drive the total accumulated error to zero by contributing to the control signal proportionally to the sum of all past errors.  Intuitively, this tries to drive the <em>average</em> of all past <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> values towards the <em>average</em> of all past <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a> values.</p>
<div class="math notranslate nohighlight">
\[u(t) = K_p e(t) + K_i \int_0^t e(\tau) \,d\tau\]</div>
<p>where <span class="math notranslate nohighlight">\(K_p\)</span> is the proportional gain, <span class="math notranslate nohighlight">\(K_i\)</span> is the integral gain, <span class="math notranslate nohighlight">\(e(t)\)</span> is the error at the current time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(\tau\)</span> is the integration variable.</p>
<p>The Integral integrates from time <span class="math notranslate nohighlight">\(0\)</span> to the current time <span class="math notranslate nohighlight">\(t\)</span>. we use <span class="math notranslate nohighlight">\(\tau\)</span> for the integration because we need a variable to take on multiple values throughout the integral, but we can’t use <span class="math notranslate nohighlight">\(t\)</span> because we already defined that as the current time.</p>
<p>The below figure shows a block diagram for a <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> controlled by a PI controller.</p>
<img alt="Block diagram of a PI controller" class="align-center" src="../../../../_images/introduction-to-pid-pi-controller-block-diagram.png" />
<p>When the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> is close the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a> in steady-state, the proportional term may be too small to pull the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-output"><span class="xref std std-term">output</span></a> all the way to the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-setpoint"><span class="xref std std-term">setpoint</span></a>, and the derivative term is zero. This can result in <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-steady-state-error"><span class="xref std std-term">steady-state error</span></a> as shown in figure 2.4</p>
<img alt="PI controller with steady-state" class="align-center" src="../../../../_images/introduction-to-pid-pi-controller-steadystate.png" />
<p>A common way of eliminating <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-steady-state-error"><span class="xref std std-term">steady-state error</span></a> is to integrate the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-error"><span class="xref std std-term">error</span></a> and add it to the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-control-effort"><span class="xref std std-term">control effort</span></a>. This increases the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-control-effort"><span class="xref std std-term">control effort</span></a> until the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> converges. Figure 2.4 shows an example of <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-steady-state-error"><span class="xref std std-term">steady-state error</span></a> for a flywheel, and figure 2.5 shows how an integrator added to the flywheel controller eliminates it. However, too high of an integral gain can lead to overshoot, as shown in figure 2.6.</p>
<img alt="Figure 2.6 and 2.6 graphs" class="align-center" src="../../../../_images/introduction-to-pid-pi-controller-overshoot.png" />
</section>
<section id="putting-it-all-together">
<h2>Putting It All Together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For information on using the WPILib provided PIDController, see the <a class="reference internal" href="../controllers/pidcontroller.html#pid-control-in-wpilib"><span class="std std-ref">relevant article</span></a>.</p>
</div>
<p>When these terms are combined by summing them all together, one gets the typical definition for a PID controller.</p>
<div class="math notranslate nohighlight">
\[u(t) = K_p e(t) + K_i \int_0^t e(\tau) \,d\tau + K_d \frac{de}{dt}\]</div>
<p>where <span class="math notranslate nohighlight">\(K_p\)</span> is the proportional gain, <span class="math notranslate nohighlight">\(K_i\)</span> is the integral gain, <span class="math notranslate nohighlight">\(K_d\)</span> is the derivative gain, <span class="math notranslate nohighlight">\(e(t)\)</span> is the error at the current time <span class="math notranslate nohighlight">\(t\)</span>, and <span class="math notranslate nohighlight">\(\tau\)</span> is the integration variable.</p>
<p>The below figure shows a block diagram for a PID controller.</p>
<img alt="Block diagram of a PID controller" class="align-center" src="../../../../_images/introduction-to-pid-pid-controller-block.png" />
</section>
<section id="response-types">
<h2>Response Types<a class="headerlink" href="#response-types" title="Permalink to this heading"></a></h2>
<p>A <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> driven by a PID controller generally has three types of responses: underdamped, over-damped, and critically damped. These are shown in figure 2.8.</p>
<p>For the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-step-response"><span class="xref std std-term">step responses</span></a> in figure 2.7, <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-rise-time"><span class="xref std std-term">rise time</span></a> is the time the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> takes to initially reach the reference after applying the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-step-input"><span class="xref std std-term">step input</span></a>. <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-settling-time"><span class="xref std std-term">Settling time</span></a> is the time the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-system"><span class="xref std std-term">system</span></a> takes to settle at the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a> after the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-step-input"><span class="xref std std-term">step input</span></a> is applied.</p>
<p>An <em>underdamped</em> response oscillates around the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a> before settling. An <em>overdamped</em> response</p>
<img alt="PID controller response types" class="align-center" src="../../../../_images/introduction-to-pid-damped-controller.png" />
<p>is slow to rise and does not overshoot the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a>. A <em>critically damped</em> response has the fastest <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-rise-time"><span class="xref std std-term">rise time</span></a> without overshooting the <a class="hxr-hoverxref hxr-tooltip reference internal" href="../controls-glossary.html#term-reference"><span class="xref std std-term">reference</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction-to-feedforward.html" class="btn btn-neutral float-left" title="Introduction to DC Motor Feedforward" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pid-video.html" class="btn btn-neutral float-right" title="PID Introduction Video by WPI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, FIRST and other WPILib Contributors. This work is licensed under a Creative Commons Attribution 4.0 International License.
      <span class="commit">Revision <code>c3ff9f30</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2022/">2022</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>