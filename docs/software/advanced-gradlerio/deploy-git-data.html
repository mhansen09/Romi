<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="Including Git Data in Deploy" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="This article will go over how to include information from Git, such as branch name or commit hash, into the robot code. This is necessary for using such information in robot code, such as printing ..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Including Git Data in Deploy &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/pid-tune.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/advanced-gradlerio/deploy-git-data.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../_static/js/present.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script src="../../../_static/js/versionwarning.js"></script>
        <script src="../../../_static/pid-tune.js"></script>
        <script src="../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../_static/js/version-2014.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Advanced Controls" href="../advanced-controls/index.html" />
    <link rel="prev" title="Gradlew Tasks" href="gradlew-tasks.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                  <script id="headerscript">
                    if( new Date().getMonth() == 3 && new Date().getDate() == 1) {
                      document.getElementById("headerscript").insertAdjacentHTML("afterend", '<li id="water-link"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Water Game</a></li>');
                    }
                  </script>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="../../../index.html" style="display: block; margin-bottom: 0;">
      FIRST Robotics Competition
    <picture>
      <source
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.webp 300w, ../../../_static/wpilibDocsLogo_500.webp 500w, ../../../_static/wpilibDocsLogo_700.webp 700w, ../../../_static/wpilibDocsLogo_1050.webp 1050w"
        type="image/webp"
      />
      <img
        src="../../../_static/wpilibDocsLogo.png"
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.png 300w, ../../../_static/wpilibDocsLogo_500.png 500w, ../../../_static/wpilibDocsLogo_700.png 700w, ../../../_static/wpilibDocsLogo_1050.png 1050w"
        height="468"
        width="1050"
        alt="Logo"
        decoding="async"
        class="logo"
        style="height: auto; width: 100%; border-radius: 0%;"
      />
    </picture>
  </a>
      <div class="version">
        latest
      </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yearly-overview/index.html">2023 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commandbased/index.html">Command-Based Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced GradleRIO</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="external-libraries.html">Using External Libraries with Robot Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot-code-ci.html">Setting up CI for Robot Code using GitHub Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-formatting.html">Using a Code Formatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="gradlew-tasks.html">Gradlew Tasks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Including Git Data in Deploy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Advanced GradleRIO</a></li>
      <li class="breadcrumb-item active">Including Git Data in Deploy</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/main/source/docs/software/advanced-gradlerio/deploy-git-data.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="including-git-data-in-deploy">
<h1>Including Git Data in Deploy<a class="headerlink" href="#including-git-data-in-deploy" title="Permalink to this heading"></a></h1>
<p>This article will go over how to include information from Git, such as branch name or commit hash, into the robot code. This is necessary for using such information in robot code, such as printing out commit hash and branch name when the robot starts.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Git must be in the path for this to work. This should be enabled by default when <a class="reference external" href="https://git-scm.com/downloads">installing Git</a>.</p>
</div>
<section id="deploying-branch-name">
<h2>Deploying Branch Name<a class="headerlink" href="#deploying-branch-name" title="Permalink to this heading"></a></h2>
<p>This example uses <a class="reference external" href="https://git-scm.com/docs/git-rev-parse">git rev-parse</a> to extract data the name of the current branch. The Git command used for this is:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git rev-parse --abbrev-ref HEAD
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--abbrev-ref</span></code> flag tells Git to use a short version of the name for the current commit that <code class="docutils literal notranslate"><span class="pre">rev-parse</span></code> is acting on. When HEAD is the most recent commit on a branch, this will return the name of that branch.</p>
<p>Next, create a new task in the <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> file that will run the above Git command and write it to a file in the <code class="docutils literal notranslate"><span class="pre">src/main/deploy</span></code> directory. For example, the following is an example task named <code class="docutils literal notranslate"><span class="pre">writeBranchName</span></code> that will write the branch name to a file named <code class="docutils literal notranslate"><span class="pre">branch.txt</span></code>.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">tasks</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s2">&quot;writeBranchName&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">   </span><span class="c1">// Define an output stream to write to instead of terminal</span><span class="w"></span>
<span class="w">   </span><span class="kt">def</span><span class="w"> </span><span class="n">stdout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayOutputStream</span><span class="o">()</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Execute the git command</span><span class="w"></span>
<span class="w">   </span><span class="n">exec</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">      </span><span class="n">commandLine</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;rev-parse&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;--abbrev-ref&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;HEAD&quot;</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Write to the output stream instead of terminal</span><span class="w"></span>
<span class="w">      </span><span class="n">standardOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stdout</span><span class="w"></span>
<span class="w">   </span><span class="o">}</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Parse the output into a string</span><span class="w"></span>
<span class="w">   </span><span class="kt">def</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stdout</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">trim</span><span class="o">()</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Create a new file</span><span class="w"></span>
<span class="w">   </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="o">(</span><span class="w"></span>
<span class="w">      </span><span class="c1">// Join project directory and deploy directory</span><span class="w"></span>
<span class="w">      </span><span class="n">projectDir</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;/src/main/deploy&quot;</span><span class="o">,</span><span class="w"></span>
<span class="w">      </span><span class="c1">// File name to write to</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;branch.txt&quot;</span><span class="w"></span>
<span class="w">   </span><span class="o">).</span><span class="na">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="c1">// Set the contents of the file to the variable branch</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>
</pre></div>
</div>
<p>This registers a <a class="reference external" href="https://docs.gradle.org/current/userguide/tutorial_using_tasks.html">Gradle task</a> that uses the above Git command, saves the output to a variable, and then writes it to a file. Since it was written to the <code class="docutils literal notranslate"><span class="pre">src/main/deploy</span></code> directory, it will be included in the jar file deployed to the robot and accessible in code.</p>
<p>The next step is to make the deploy task depend on the task you created, so that it will automatically run before the code is deployed. This example uses the task name <code class="docutils literal notranslate"><span class="pre">writeBranchName</span></code> from the previous example, but it should be replaced with the name of the task in your <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code>.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">deploy</span><span class="o">.</span><span class="na">targets</span><span class="o">.</span><span class="na">roborio</span><span class="o">.</span><span class="na">artifacts</span><span class="o">.</span><span class="na">frcStaticFileDeploy</span><span class="o">.</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">writeBranchName</span><span class="o">)</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="deploying-commit-hash">
<h2>Deploying Commit Hash<a class="headerlink" href="#deploying-commit-hash" title="Permalink to this heading"></a></h2>
<p>Similar to the previous example, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rev-parse</span></code> will be used to parse the current commit hash. The Git command used for this is:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>git rev-parse --short HEAD
</pre></div>
</div>
<p>Similar to the previous Git command, <code class="docutils literal notranslate"><span class="pre">rev-parse</span></code> is used to find information about the commit at HEAD. However, instead of using <code class="docutils literal notranslate"><span class="pre">--abbrev-ref</span></code> to find the branch name associated with that commit, <code class="docutils literal notranslate"><span class="pre">--short</span></code> is used to find the 7-character commit hash.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you wish to use the full commit hash instead of the 7-character version, you can leave out the <code class="docutils literal notranslate"><span class="pre">--short</span></code> flag.</p>
</div>
<p>Next is to create a task in <code class="docutils literal notranslate"><span class="pre">build.gradle</span></code> that runs this command and writes the output to a file. This is largely the same as the first example, except the task is named <code class="docutils literal notranslate"><span class="pre">writeCommitHash</span></code>, the new Git command is used, and it is written to <code class="docutils literal notranslate"><span class="pre">commit.txt</span></code> instead of <code class="docutils literal notranslate"><span class="pre">branch.txt</span></code>.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">tasks</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s2">&quot;writeCommitHash&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">   </span><span class="kt">def</span><span class="w"> </span><span class="n">stdout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ByteArrayOutputStream</span><span class="o">()</span><span class="w"></span>

<span class="w">   </span><span class="n">exec</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">     </span><span class="n">commandLine</span><span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;rev-parse&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;--short&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;HEAD&quot;</span><span class="w"></span>
<span class="w">     </span><span class="n">standardOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stdout</span><span class="w"></span>
<span class="w">   </span><span class="o">}</span><span class="w"></span>

<span class="w">   </span><span class="kt">def</span><span class="w"> </span><span class="n">commitHash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stdout</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">trim</span><span class="o">()</span><span class="w"></span>

<span class="w">   </span><span class="k">new</span><span class="w"> </span><span class="nf">File</span><span class="o">(</span><span class="w"></span>
<span class="w">      </span><span class="n">projectDir</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;/src/main/deploy&quot;</span><span class="o">,</span><span class="w"></span>
<span class="w">      </span><span class="s2">&quot;commit.txt&quot;</span><span class="w"></span>
<span class="w">   </span><span class="o">).</span><span class="na">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">commitHash</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>

<span class="n">deploy</span><span class="o">.</span><span class="na">targets</span><span class="o">.</span><span class="na">roborio</span><span class="o">.</span><span class="na">artifacts</span><span class="o">.</span><span class="na">frcStaticFileDeploy</span><span class="o">.</span><span class="na">dependsOn</span><span class="o">(</span><span class="n">writeCommitHash</span><span class="o">)</span><span class="w"></span>
</pre></div>
</div>
<section id="ignoring-generated-files-with-git">
<h3>Ignoring Generated Files with Git<a class="headerlink" href="#ignoring-generated-files-with-git" title="Permalink to this heading"></a></h3>
<p>Since these files include data that is already tracked by Git and are regenerated every time code is deployed, it is recommended to not track these changes with Git by using the <a class="reference external" href="https://git-scm.com/docs/gitignore">gitignore</a> file. This file should exist by default in any project generated by the WPILib VS Code extension. Below is an example that continues to use the <code class="docutils literal notranslate"><span class="pre">branch.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">commit.txt</span></code> file names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">deploy</span><span class="o">/</span><span class="n">branch</span><span class="o">.</span><span class="n">txt</span>
<span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">deploy</span><span class="o">/</span><span class="n">commit</span><span class="o">.</span><span class="n">txt</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="using-deployed-files">
<h2>Using Deployed Files<a class="headerlink" href="#using-deployed-files" title="Permalink to this heading"></a></h2>
<p>In order to access files that were written to the deploy directory in code, you have to use the <code class="docutils literal notranslate"><span class="pre">getDeployDirectory()</span></code> method of the <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj/Filesystem.html">Filesystem</a> class in Java, or the <code class="docutils literal notranslate"><span class="pre">GetDeployDirectory()</span></code> function of the <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/namespacefrc_1_1filesystem.html">frc::filesystem</a> namespace in C++. Below is an example of opening both files from the previous examples:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Opening and reading the files is slow and should not be performed during any periodic methods. Since the file will only change on deploy, it only needs to be read once.</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">File</span><span class="w"> </span><span class="n">deployDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Filesystem</span><span class="p">.</span><span class="na">getDeployDirectory</span><span class="p">();</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">branchFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="n">deployDir</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;branch.txt&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">commitFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="n">deployDir</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;commit.txt&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>For more information on how to interact with the file objects, see the documentation of the <a class="reference external" href="https://docs.oracle.com/javase/7/docs/api/java/io/File.html">File</a> class.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gradlew-tasks.html" class="btn btn-neutral float-left" title="Gradlew Tasks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../advanced-controls/index.html" class="btn btn-neutral float-right" title="Advanced Controls" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, FIRST and other WPILib Contributors. This work is licensed under a Creative Commons Attribution 4.0 International License.
      <span class="commit">Revision <code>c3ff9f30</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2022/">2022</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>