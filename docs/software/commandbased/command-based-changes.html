<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18: http://docutils.sourceforge.net/" />

  <meta property="og:title" content="2020 Command-Based Rewrite: What Changed?" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-based-changes.html" />
  <meta property="og:site_name" content="FIRST Robotics Competition Documentation" />
  <meta property="og:description" content="This article provides a summary of changes from the original command-based framework to the 2020 rewrite. This summary is not necessarily comprehensive - for rigorous documentation, as always, refe..." />
  <meta property="og:image" content="https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png" />
  <meta property="og:image:alt" content="FIRST Robotics Competition Documentation" />
  <meta property="og:ignore_canonical" content="true" />
<meta name="theme-color" content="#003974" />
<meta name="google-site-verification" content="xcmdxM0KzMYiAOeJzyF_l2Tn3AHGzPICs9_vX6q2nwM" />
<link rel="alternate" hreflang="en" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="x-default" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="es" href="https://docs.wpilib.org/es/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="fr" href="https://docs.wpilib.org/fr/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="he" href="https://docs.wpilib.org/he/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="pt" href="https://docs.wpilib.org/pt/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="tr" href="https://docs.wpilib.org/tr/stable/docs/software/commandbased/command-based-changes.html" />
<link rel="alternate" hreflang="zh-CN" href="https://docs.wpilib.org/zh_CN/stable/docs/software/commandbased/command-based-changes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2020 Command-Based Rewrite: What Changed? &mdash; FIRST Robotics Competition  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/pid-tune.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/frc-rtd.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sphinx_rtd_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/FIRSTicon_RGB_withTM.ico"/>
    <link rel="canonical" href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-based-changes.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script async="async" src="../../../_static/js/present.js"></script>
        <script src="../../../_static/js/hoverxref.js"></script>
        <script src="../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../_static/js/micromodal.min.js"></script>
        <script src="../../../_static/js/versionwarning.js"></script>
        <script src="../../../_static/pid-tune.js"></script>
        <script src="../../../_static/js/api-docs-redirect.js"></script>
        <script src="../../../_static/js/fix-rtd-menu-ios.js"></script>
        <script src="../../../_static/js/external-links-new-tab.js"></script>
        <script src="../../../_static/js/version-2014.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Kinematics and Odometry" href="../kinematics-and-odometry/index.html" />
    <link rel="prev" title="Combining Motion Profiling and PID in Command-Based" href="profilepid-subsystems-commands.html" /> 
</head>

<body class="wy-body-for-nav"> 


<div class="header-bar">
        <!-- Color Strip -->
        <div class="color-strip">
            <div class="fred"></div>
            <div class="forange"></div>
            <div class="fblue"></div>
        </div>
        <div class="link-bar-container">
            <div id="link-bar" class="collapse">
                <ul>          
                  <li id="manual-link"><a href="https://www.firstinspires.org/resource-library/frc/competition-manual-qa-system">FRC Game Manual</a></li>
                  <li id="qa-link"><a href="https://frc-qa.firstinspires.org/">FRC Game Q&A</a></li>
                  <script id="headerscript">
                    if( new Date().getMonth() == 3 && new Date().getDate() == 1) {
                      document.getElementById("headerscript").insertAdjacentHTML("afterend", '<li id="water-link"><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Water Game</a></li>');
                    }
                  </script>
                </ul>
            </div>
        </div>
</div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <a href="../../../index.html" style="display: block; margin-bottom: 0;">
      FIRST Robotics Competition
    <picture>
      <source
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.webp 300w, ../../../_static/wpilibDocsLogo_500.webp 500w, ../../../_static/wpilibDocsLogo_700.webp 700w, ../../../_static/wpilibDocsLogo_1050.webp 1050w"
        type="image/webp"
      />
      <img
        src="../../../_static/wpilibDocsLogo.png"
        sizes="300px"
        srcset="../../../_static/wpilibDocsLogo_300.png 300w, ../../../_static/wpilibDocsLogo_500.png 500w, ../../../_static/wpilibDocsLogo_700.png 700w, ../../../_static/wpilibDocsLogo_1050.png 1050w"
        height="468"
        width="1050"
        alt="Logo"
        decoding="async"
        class="logo"
        style="height: auto; width: 100%; border-radius: 0%;"
      />
    </picture>
  </a>
      <div class="version">
        latest
      </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Zero to Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-1/index.html">Step 1: Building your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-2/index.html">Step 2: Installing Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-3/index.html">Step 3: Preparing Your Robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zero-to-robot/step-4/index.html">Step 4: Programming your Robot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Control System Overviews</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-hardware.html">Hardware Component Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../controls-overviews/control-system-software.html">Software Component Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Programming Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what-is-wpilib.html">What is WPILib?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yearly-overview/index.html">2023 Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode-overview/index.html">VS Code Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboards/index.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telemetry/index.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labview/index.html">FRC LabVIEW Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware-apis/index.html">Hardware APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../can-devices/index.html">CAN Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic-programming/index.html">Basic Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/support-resources.html">Support Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frc-glossary.html">FRC Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/index.html">WPILib Java API Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/index.html">WPILib C++ API Docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driverstation/index.html">Driver Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robotbuilder/index.html">RobotBuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/robot-simulation/index.html">Robot Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wpilib-tools/outlineviewer/index.html">OutlineViewer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../vision-processing/index.html">Vision Processing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Command-Based Programming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="what-is-command-based.html">What Is “Command-Based” Programming?</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-compositions.html">Command Compositions</a></li>
<li class="toctree-l2"><a class="reference internal" href="subsystems.html">Subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding-commands-to-triggers.html">Binding Commands to Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="structuring-command-based-project.html">Structuring a Command-Based Robot Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="organizing-command-based.html">Organizing Command-Based Robot Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="command-scheduler.html">The Command Scheduler</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-command-discussion.html">A Technical Discussion on C++ Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid-subsystems-commands.html">PID Control through PIDSubsystems and PIDCommands</a></li>
<li class="toctree-l2"><a class="reference internal" href="profile-subsystems-commands.html">Motion Profiling through TrapezoidProfileSubsystems and TrapezoidProfileCommands</a></li>
<li class="toctree-l2"><a class="reference internal" href="profilepid-subsystems-commands.html">Combining Motion Profiling and PID in Command-Based</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2020 Command-Based Rewrite: What Changed?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kinematics-and-odometry/index.html">Kinematics and Odometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networktables/index.html">NetworkTables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pathplanning/index.html">Path Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roborio-info/index.html">roboRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-gradlerio/index.html">Advanced GradleRIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-controls/index.html">Advanced Controls</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convenience-features/index.html">Convenience Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples and Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/wpilib-examples.html">WPILib Example Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples-tutorials/third-party-examples.html">Third Party Example Projects</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-basics/index.html">Hardware - Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/hardware-tutorials/index.html">Hardware Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hardware/sensors/index.html">Sensors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Romi Robot</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../romi-robot/index.html">Getting Started with Romi</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Robot Networking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-introduction/index.html">Networking Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/networking-utilities/index.html">Networking Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/frc-docs/index.html">Contributing to frc-docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/wpilib/index.html">Developing with allwpilib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/wpilibsuite/frc-docs/issues">Report an Issue</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FIRST Robotics Competition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Command-Based Programming</a></li>
      <li class="breadcrumb-item active">2020 Command-Based Rewrite: What Changed?</li>
<li class="wy-breadcrumbs-aside" style="padding-inline-start: 6px;">
    <a href="?present" class="btn" style="background-color: #2980b9; color: white; padding: 5px">
        Present
        <span class="fa fa-expand"></span>
    </a>
</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/wpilibsuite/frc-docs/blob/main/source/docs/software/commandbased/command-based-changes.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="command-based-rewrite-what-changed">
<h1>2020 Command-Based Rewrite: What Changed?<a class="headerlink" href="#command-based-rewrite-what-changed" title="Permalink to this heading"></a></h1>
<p>This article provides a summary of changes from the original command-based framework to the 2020 rewrite.  This summary is not necessarily comprehensive - for rigorous documentation, as always, refer to the API docs (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/package-summary.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/">C++</a>).</p>
<section id="package-location">
<h2>Package Location<a class="headerlink" href="#package-location" title="Permalink to this heading"></a></h2>
<p>The new command-based framework is located in the <code class="docutils literal notranslate"><span class="pre">wpilibj2</span></code> package for Java, and in the <code class="docutils literal notranslate"><span class="pre">frc2</span></code> namespace for C++. The new framework must be installed using the instructions: <a class="reference internal" href="../vscode-overview/3rd-party-libraries.html#wpilib-command-libraries"><span class="std std-ref">WPILib Command Libraries</span></a>.</p>
</section>
<section id="major-architectural-changes">
<h2>Major Architectural Changes<a class="headerlink" href="#major-architectural-changes" title="Permalink to this heading"></a></h2>
<p>The overall structure of the command-based framework has remained largely the same.  However, there are some still a few major architectural changes that users should be aware of:</p>
<section id="commands-and-subsystems-as-interfaces">
<h3>Commands and Subsystems as Interfaces<a class="headerlink" href="#commands-and-subsystems-as-interfaces" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Command</span></code> (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/Command.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_command.html">C++</a>) and <code class="docutils literal notranslate"><span class="pre">Subsystem</span></code> (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/Subsystem.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_subsystem.html">C++</a>) are both now interfaces as opposed to abstract classes, allowing advanced users more potential flexibility.  <code class="docutils literal notranslate"><span class="pre">CommandBase</span></code> and <code class="docutils literal notranslate"><span class="pre">SubsystemBase</span></code> abstract base classes are still provided for convenience, but are not required.  For more information, see <a class="reference internal" href="commands.html"><span class="doc">Commands</span></a> and <a class="reference internal" href="subsystems.html"><span class="doc">Subsystems</span></a>.</p>
</section>
<section id="multiple-command-group-classes">
<h3>Multiple Command Group Classes<a class="headerlink" href="#multiple-command-group-classes" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">CommandGroup</span></code> class no longer exists, and has been replaced by a number of narrower classes that can be recursively composed to create more-complicated group structures.  For more information see <a class="reference internal" href="command-compositions.html"><span class="doc">Command Compositions</span></a>.</p>
</section>
<section id="inline-command-definitions">
<h3>Inline Command Definitions<a class="headerlink" href="#inline-command-definitions" title="Permalink to this heading"></a></h3>
<p>Previously, users were required to write a subclass of <code class="docutils literal notranslate"><span class="pre">Command</span></code> in almost all cases where a command was needed.  Many of the new commands are designed to allow inline definition of command functionality, and so can be used without the need for an explicit subclass.  For more information, see <a class="reference internal" href="commands.html#included-command-types"><span class="std std-ref">Included Command Types</span></a>.</p>
</section>
<section id="injection-of-command-dependencies">
<h3>Injection of Command Dependencies<a class="headerlink" href="#injection-of-command-dependencies" title="Permalink to this heading"></a></h3>
<p>While not an actual change to the coding of the library, the recommended use pattern for the new command-based framework utilizes injection of subsystem dependencies into commands, so that subsystems are not declared as globals.  This is a cleaner, more maintainable, and more reusable pattern than the global subsystem pattern promoted previously.  For more information, see <a class="reference internal" href="structuring-command-based-project.html"><span class="doc">Structuring a Command-Based Robot Project</span></a>.</p>
</section>
<section id="command-ownership-c-only">
<h3>Command Ownership (C++ Only)<a class="headerlink" href="#command-ownership-c-only" title="Permalink to this heading"></a></h3>
<p>The previous command framework required users to use raw pointers for all commands, resulting in nearly-unavoidable memory leaks in all C++ command-based projects, as well as leaving room for common errors such as double-allocating commands within command-groups.</p>
<p>The new command framework offers ownership management for all commands.  Default commands and commands bound to buttons are typically owned by the scheduler, and component commands are owned by their encapsulating command groups.  As a result, users should generally never heap-allocate a command with <code class="docutils literal notranslate"><span class="pre">new</span></code> unless there is a very good reason to do so.</p>
<p>Transfer of ownership is done using <a class="reference external" href="https://cpppatterns.com/patterns/perfect-forwarding.html">perfect forwarding</a>, meaning rvalues will be <em>moved</em> and lvalues will be <em>copied</em> (<a class="reference external" href="http://thbecker.net/articles/rvalue_references/section_01.html">rvalue/lvalue explanation</a>).</p>
</section>
</section>
<section id="changes-to-the-scheduler">
<h2>Changes to the Scheduler<a class="headerlink" href="#changes-to-the-scheduler" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Scheduler</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">CommandScheduler</span></code> (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/CommandScheduler.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_command_scheduler.html">C++</a>).</p></li>
<li><p>Interruptibility of commands is now the responsibility of the scheduler, not the commands, and can be specified during the call to <code class="docutils literal notranslate"><span class="pre">schedule</span></code>.</p></li>
<li><p>Users can now pass actions to the scheduler which are taken whenever a command is scheduled, interrupted, or ends normally.  This is highly useful for cases such as event logging.</p></li>
</ul>
</section>
<section id="changes-to-subsystem">
<h2>Changes to Subsystem<a class="headerlink" href="#changes-to-subsystem" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on subsystems, see <a class="reference internal" href="subsystems.html"><span class="doc">Subsystems</span></a>.</p>
</div>
<ul class="simple">
<li><p>As noted earlier, <code class="docutils literal notranslate"><span class="pre">Subsystem</span></code> is now an interface (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/Subsystem.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_subsystem.html">C++</a>); the closest equivalent of the old <code class="docutils literal notranslate"><span class="pre">Subsystem</span></code> is the new <code class="docutils literal notranslate"><span class="pre">SubsystemBase</span></code> class.  Many of the Sendable-related constructor overloads have been removed to reduce clutter; users can call the setters directly from their own constructor, if needed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initDefaultCommand</span></code> has been removed; subsystems no longer need to “know about” their default commands, which are instead registered directly with the <code class="docutils literal notranslate"><span class="pre">CommandScheduler</span></code>.  The new <code class="docutils literal notranslate"><span class="pre">setDefaultCommand</span></code> method simply wraps the <code class="docutils literal notranslate"><span class="pre">CommandScheduler</span></code> call.</p></li>
<li><p>Subsystems no longer “know about” the commands currently requiring them; this is handled exclusively by the <code class="docutils literal notranslate"><span class="pre">CommandScheduler</span></code>.  A convenience wrapper on the <code class="docutils literal notranslate"><span class="pre">CommandScheduler</span></code> method is provided, however.</p></li>
</ul>
</section>
<section id="changes-to-command">
<h2>Changes to Command<a class="headerlink" href="#changes-to-command" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on commands, see <a class="reference internal" href="commands.html"><span class="doc">Commands</span></a>.</p>
</div>
<ul class="simple">
<li><p>As noted earlier, <code class="docutils literal notranslate"><span class="pre">Command</span></code> is now an interface (<a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/wpilibj2/command/Command.html">Java</a>, <a class="reference external" href="https://github.wpilib.org/allwpilib/docs/release/cpp/classfrc2_1_1_command.html">C++</a>); the closest equivalent of the old <code class="docutils literal notranslate"><span class="pre">Command</span></code> is the new <code class="docutils literal notranslate"><span class="pre">CommandBase</span></code> class.  Many of the Sendable-related constructor overloads have been removed to reduce clutter; users can call the setters directly from their own constructor, if needed.</p></li>
<li><p>Commands no longer handle their own scheduling state; this is now the responsibility of the scheduler.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">interrupted()</span></code> method has been rolled into the <code class="docutils literal notranslate"><span class="pre">end()</span></code> method, which now takes a parameter specifying whether the command was interrupted (<code class="docutils literal notranslate"><span class="pre">false</span></code> if it ended normally).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">requires()</span></code> method has been renamed to <code class="docutils literal notranslate"><span class="pre">addRequirement()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setRunsWhenDisabled(boolean</span> <span class="pre">disabled)</span></code> has been replaced by an overrideable <a class="reference internal" href="commands.html#runswhendisabled"><span class="std std-ref">runsWhenDisabled</span></a> method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setInterruptible(boolean</span> <span class="pre">interruptible)</span></code> has been replaced by an overrideable <a class="reference internal" href="commands.html#getinterruptionbehavior"><span class="std std-ref">getInterruptionBehavior</span></a> method.</p></li>
<li><p>Several <a class="reference internal" href="command-compositions.html#command-compositions"><span class="std std-ref">“decorator” methods</span></a> have been added to allow easy inline modification of commands (e.g. adding a timeout).</p></li>
<li><p>(C++ only) In order to allow the decorators to work with the command ownership model, a <a class="hxr-hoverxref hxr-tooltip reference internal" href="../frc-glossary.html#term-CRTP"><span class="xref std std-term">CRTP</span></a> is used via the <code class="docutils literal notranslate"><span class="pre">CommandHelper</span></code> <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/blob/main/wpilibNewCommands/src/main/native/include/frc2/command/CommandHelper.h">class</a>.  Any user-defined Command subclass <code class="docutils literal notranslate"><span class="pre">Foo</span></code> <em>must</em> extend <code class="docutils literal notranslate"><span class="pre">CommandHelper&lt;Foo,</span> <span class="pre">Base&gt;</span></code> where <code class="docutils literal notranslate"><span class="pre">Base</span></code> is the desired base class.</p></li>
</ul>
</section>
<section id="changes-to-pidsubsystem-pidcommand">
<h2>Changes to PIDSubsystem/PIDCommand<a class="headerlink" href="#changes-to-pidsubsystem-pidcommand" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information, see <a class="reference internal" href="pid-subsystems-commands.html"><span class="doc">PID Control through PIDSubsystems and PIDCommands</span></a>, and <a class="reference internal" href="../advanced-controls/controllers/pidcontroller.html#pid-control-in-wpilib"><span class="std std-ref">PID Control in WPILib</span></a></p>
</div>
<ul class="simple">
<li><p>Following the changes to PIDController, these classes now run synchronously from the main robot loop.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">PIDController</span></code> is now injected through the constructor, removing many of the forwarding methods.  It can be modified after construction with <code class="docutils literal notranslate"><span class="pre">getController()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PIDCommand</span></code> is intended largely for inline use, as shown in the GyroDriveCommands example (<a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/gyrodrivecommands">Java</a>, <a class="reference external" href="https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/GyroDriveCommands">C++</a>).</p></li>
<li><p>If users wish to use PIDCommand more “traditionally,” overriding the protected <code class="docutils literal notranslate"><span class="pre">returnPIDInput()</span></code> and <code class="docutils literal notranslate"><span class="pre">usePIDOutput(double</span> <span class="pre">output)</span></code> methods has been replaced by modifying the protected <code class="docutils literal notranslate"><span class="pre">m_measurement</span></code> and <code class="docutils literal notranslate"><span class="pre">m_useOutput</span></code> fields.  Similarly, rather than calling <code class="docutils literal notranslate"><span class="pre">setSetpoint</span></code>, users can modify the protected <code class="docutils literal notranslate"><span class="pre">m_setpoint</span></code> field.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="profilepid-subsystems-commands.html" class="btn btn-neutral float-left" title="Combining Motion Profiling and PID in Command-Based" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../kinematics-and-odometry/index.html" class="btn btn-neutral float-right" title="Kinematics and Odometry" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, FIRST and other WPILib Contributors. This work is licensed under a Creative Commons Attribution 4.0 International License.
      <span class="commit">Revision <code>c3ff9f30</code>.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="Versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
          <dd><a href="/en/stable/">stable</a></dd>
        
          <dd><a href="/en/2022/">2022</a></dd>
        
          <dd><a href="/en/2021/">2021</a></dd>
        
          <dd><a href="/en/2020/">2020</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//docs.wpilib.org/_/downloads/en/latest/htmlzip/">html</a></dd>
        
      </dl>
      <dl>
        
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/frc-docs/?fromdocs=frc-docs">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/frc-docs/?fromdocs=frc-docs">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
  <script>
    if (typeof READTHEDOCS_DATA !== 'undefined') {
        if (!READTHEDOCS_DATA.features) {
          READTHEDOCS_DATA.features = {};
        }
        READTHEDOCS_DATA.features.docsearch_disabled = false;
      }
    </script>

</body>
</html>